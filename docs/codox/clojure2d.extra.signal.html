<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>clojure2d.extra.signal documentation</title><script type="text/javascript" async="" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML"></script><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="highlight/solarized-light.css" /><script type="text/javascript" src="highlight/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a> with <a href="https://github.com/xsc/codox-theme-rdash">RDash UI</a> theme</h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Clojure2d</span> <span class="project-version">0.1.0-SNAPSHOT</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>clojure2d</span></div></div></li><li class="depth-2 branch"><a href="clojure2d.color.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>color</span></div></a></li><li class="depth-2 branch"><a href="clojure2d.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>extra</span></div></div></li><li class="depth-3 branch"><a href="clojure2d.extra.glitch.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>glitch</span></div></a></li><li class="depth-3 branch"><a href="clojure2d.extra.overlays.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>overlays</span></div></a></li><li class="depth-3 branch"><a href="clojure2d.extra.raymarching.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>raymarching</span></div></a></li><li class="depth-3 branch"><a href="clojure2d.extra.segmentation.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>segmentation</span></div></a></li><li class="depth-3 branch current"><a href="clojure2d.extra.signal.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>signal</span></div></a></li><li class="depth-3"><a href="clojure2d.extra.utils.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>utils</span></div></a></li><li class="depth-2"><a href="clojure2d.pixels.html"><div class="inner"><span class="tree" style="top: -207px;"><span class="top" style="height: 216px;"></span><span class="bottom"></span></span><span>pixels</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="clojure2d.extra.signal.html#var-apply-effects"><div class="inner"><span>apply-effects</span></div></a></li><li class="depth-1"><a href="clojure2d.extra.signal.html#var-compose-effects"><div class="inner"><span>compose-effects</span></div></a></li><li class="depth-1"><a href="clojure2d.extra.signal.html#var-db-.3Elinear"><div class="inner"><span>db-&gt;linear</span></div></a></li><li class="depth-1"><a href="clojure2d.extra.signal.html#var-effect"><div class="inner"><span>effect</span></div></a></li><li class="depth-1"><a href="clojure2d.extra.signal.html#var-effects-filter"><div class="inner"><span>effects-filter</span></div></a></li><li class="depth-1"><a href="clojure2d.extra.signal.html#var-effects-list"><div class="inner"><span>effects-list</span></div></a></li><li class="depth-1"><a href="clojure2d.extra.signal.html#var-linear-.3Edb"><div class="inner"><span>linear-&gt;db</span></div></a></li><li class="depth-1"><a href="clojure2d.extra.signal.html#var-load-signal"><div class="inner"><span>load-signal</span></div></a></li><li class="depth-1"><a href="clojure2d.extra.signal.html#var-make-sum-wave"><div class="inner"><span>make-sum-wave</span></div></a></li><li class="depth-1"><a href="clojure2d.extra.signal.html#var-make-wave"><div class="inner"><span>make-wave</span></div></a></li><li class="depth-1"><a href="clojure2d.extra.signal.html#var-oscillators"><div class="inner"><span>oscillators</span></div></a></li><li class="depth-1"><a href="clojure2d.extra.signal.html#var-pixels-.3Esignal"><div class="inner"><span>pixels-&gt;signal</span></div></a></li><li class="depth-1"><a href="clojure2d.extra.signal.html#var-save-signal"><div class="inner"><span>save-signal</span></div></a></li><li class="depth-1"><a href="clojure2d.extra.signal.html#var-signal-.3Epixels"><div class="inner"><span>signal-&gt;pixels</span></div></a></li><li class="depth-1"><a href="clojure2d.extra.signal.html#var-signal-from-wave"><div class="inner"><span>signal-from-wave</span></div></a></li><li class="depth-1"><a href="clojure2d.extra.signal.html#var-snoise"><div class="inner"><span>snoise</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">clojure2d.extra.signal</h1><div class="doc"><div class="markdown"><p>Signal processing and generation.</p>
<h2><a href="#signal" name="signal"></a>Signal</h2>
<p>Signal is array of doubles from range <code>[-1.0.1.0]</code> packed into <code>Signal</code> type.</p>
<p>Signal can be:</p>
<ul>
  <li>obtained from <code>Pixels</code> with <a href="clojure2d.extra.signal.html#var-pixels-.3Esignal">pixels-&gt;signal</a> function.</li>
  <li>generated by calling <a href="clojure2d.extra.signal.html#var-signal-from-wave">signal-from-wave</a>.</li>
  <li>loaded from file with <a href="clojure2d.extra.signal.html#var-load-signal">load-signal</a> function. Signal should be encoded as 16-bit signed integer big endian.</li>
</ul>
<h3><a href="#pixels-as-signal" name="pixels-as-signal"></a>Pixels as Signal</h3>
<p><code>Pixels</code> (<code>Image</code>) can be treated as <code>Signal</code>. Conversion to Signal is based on strategies of converting image to RAW and then converting to audio. It includes channel data layout and packing into integer, encoding, endianess, etc.</p>
<p>To convert <code>Pixels</code> to <code>Signal</code> use <a href="clojure2d.extra.signal.html#var-pixels-.3Esignal">pixels-&gt;signal</a> function. To convert back use <a href="clojure2d.extra.signal.html#var-signal-.3Epixels">signal-&gt;pixels</a>. <a href="clojure2d.extra.signal.html#var-signal-.3Epixels">signal-&gt;pixels</a> requires target <code>Pixels</code> object to store result of conversion. Target is mutated then.</p>
<p>To filter <code>Pixels</code> directly (without explicit conversion to and from Signals) you can use <a href="clojure2d.pixels.html#var-filter-channels">filter-channels</a> with <a href="clojure2d.extra.signal.html#var-effects-filter">effects-filter</a>.</p>
<h3><a href="#wave-as-signal" name="wave-as-signal"></a>Wave as Signal</h3>
<h3><a href="#file-operations" name="file-operations"></a>File operations</h3>
<h2><a href="#signal-processing" name="signal-processing"></a>Signal processing</h2>
<p>To process Signal use <a href="clojure2d.extra.signal.html#var-apply-effects">apply-effects</a> function on it.</p>
<p>Effect is signal filter, created with <a href="clojure2d.extra.signal.html#var-effect">effect</a> multimethod. Effects can be composed with <a href="clojure2d.extra.signal.html#var-compose-effects">compose-effects</a>. Effect can be treated as function and can be called for given sample.</p>
<p>Each effect has itâ€™s own parametrization which should be passed during creation.</p>
<p>List of all available effects is under <a href="clojure2d.extra.signal.html#var-effects-list">effects-list</a> value.</p></div><div class="markdown"><h4>Categories</h4><ul></ul><p>Other vars: <a>-&gt;BiquadConf</a> <a>-&gt;EffectsList</a> <a>-&gt;SampleAndState</a> <a>-&gt;Signal</a> <a>-&gt;StateBassTreble</a> <a>-&gt;StateBiquad</a> <a>-&gt;StateDecimator</a> <a>-&gt;StateDivider</a> <a>-&gt;StateEcho</a> <a>-&gt;StateFm</a> <a>-&gt;StateMdaThruZero</a> <a>-&gt;StateVcf303</a> <a href="clojure2d.extra.signal.html#var-apply-effects">apply-effects</a> <a href="clojure2d.extra.signal.html#var-compose-effects">compose-effects</a> <a href="clojure2d.extra.signal.html#var-db-.3Elinear">db-&gt;linear</a> <a href="clojure2d.extra.signal.html#var-effect">effect</a> <a href="clojure2d.extra.signal.html#var-effects-filter">effects-filter</a> <a href="clojure2d.extra.signal.html#var-effects-list">effects-list</a> <a href="clojure2d.extra.signal.html#var-linear-.3Edb">linear-&gt;db</a> <a href="clojure2d.extra.signal.html#var-load-signal">load-signal</a> <a href="clojure2d.extra.signal.html#var-make-sum-wave">make-sum-wave</a> <a href="clojure2d.extra.signal.html#var-make-wave">make-wave</a> <a href="clojure2d.extra.signal.html#var-oscillators">oscillators</a> <a href="clojure2d.extra.signal.html#var-pixels-.3Esignal">pixels-&gt;signal</a> <a href="clojure2d.extra.signal.html#var-save-signal">save-signal</a> <a href="clojure2d.extra.signal.html#var-signal-.3Epixels">signal-&gt;pixels</a> <a href="clojure2d.extra.signal.html#var-signal-from-wave">signal-from-wave</a> <a href="clojure2d.extra.signal.html#var-snoise">snoise</a></p></div></div><div class="public anchor" id="var-apply-effects"><h3>apply-effects</h3><div class="usage"><code>(apply-effects effects s reset)</code><code>(apply-effects effects s)</code></div><div class="doc"><div class="markdown"><p>Apply effects to signal.</p>
<p>If <code>reset</code> is positive, reinit state each <code>reset</code> number of samples.</p>
<p>Returns new signal.</p></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/extra/signal.clj#L165">view source</a></div></div><div class="public anchor" id="var-compose-effects"><h3>compose-effects</h3><div class="usage"><code>(compose-effects e &amp; es)</code></div><div class="doc"><div class="markdown"><p>Compose list of effects.</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Usage</p></blockquote><pre><code class="hljs clojure">(let [effect1 (effect :simple-lowpass)
      effect2 (effect :simple-highpass {:cutoff 2000.0})
      composed (compose-effects effect1 effect2)]
  [(str composed) (composed 0.5)])
;;=&gt; ["simple-highpass -&gt; simple-lowpass" 0.08629142927556396]</code></pre></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/extra/signal.clj#L140">view source</a></div></div><div class="public anchor" id="var-db-.3Elinear"><h3>db-&gt;linear</h3><div class="usage"><code>(db-&gt;linear x)</code></div><div class="doc"><div class="markdown"><p>DB to Linear (audacity)</p></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/extra/signal.clj#L215">view source</a></div></div><div class="public anchor" id="var-effect"><h3>effect</h3><h4 class="type">multimethod</h4><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/extra/signal.clj#L227">view source</a></div></div><div class="public anchor" id="var-effects-filter"><h3>effects-filter</h3><div class="usage"><code>(effects-filter effects config config-back reset)</code><code>(effects-filter effects)</code><code>(effects-filter effects reset)</code><code>(effects-filter effects config config-back)</code></div><div class="doc"><div class="markdown"><p>Creates filter to process <code>Pixels</code> as <code>Signal</code>.</p>
<p>Provide configurations to properly convert Pixels to Signal and back.</p>
<p>Optionally set <code>reset</code> value (reinit effectsâ€™ state after <code>reset</code> samples).</p>
<p>Filter operates on one channel at time and is defined to be used with <a href="clojure2d.pixels.html#var-filter-channels">filter-channels</a>.</p></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/extra/signal.clj#L194">view source</a></div></div><div class="public anchor" id="var-effects-list"><h3>effects-list</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/extra/signal.clj#L905">view source</a></div></div><div class="public anchor" id="var-linear-.3Edb"><h3>linear-&gt;db</h3><div class="usage"><code>(linear-&gt;db x)</code></div><div class="doc"><div class="markdown"><p>Linear to DB (audacity)</p></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/extra/signal.clj#L220">view source</a></div></div><div class="public anchor" id="var-load-signal"><h3>load-signal</h3><div class="usage"><code>(load-signal filename)</code></div><div class="doc"><div class="markdown"><p>Read signal from file</p></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/extra/signal.clj#L925">view source</a></div></div><div class="public anchor" id="var-make-sum-wave"><h3>make-sum-wave</h3><div class="usage"><code>(make-sum-wave fs)</code></div><div class="doc"><div class="markdown"><p>Create function which is sum of all waves.</p></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/extra/signal.clj#L994">view source</a></div></div><div class="public anchor" id="var-make-wave"><h3>make-wave</h3><h4 class="type">multimethod</h4><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/extra/signal.clj#L951">view source</a></div></div><div class="public anchor" id="var-oscillators"><h3>oscillators</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/extra/signal.clj#L992">view source</a></div></div><div class="public anchor" id="var-pixels-.3Esignal"><h3>pixels-&gt;signal</h3><div class="usage"><code>(pixels-&gt;signal p {:keys [planar? signed? little-endian? bits channels coding], :or {planar? true, little-endian? true, bits 8, signed? false, channels [0 1 2], coding :none}})</code><code>(pixels-&gt;signal p)</code></div><div class="doc"><div class="markdown"><p>Convert <code>Pixels</code> to <code>Signal</code> for given specifications.</p>
<p>Specification for conversion is based on Audacity importing options and image to RAW conversions practices. Spec contains:</p>
<ul>
  <li><code>planar?</code> - layout of channels data, planar (true, default) or interleaved (false)</li>
  <li><code>signed?</code> - channel data are encoded as signed (true, default) or unsigned (false) integer.</li>
  <li><code>little-endian?</code> - for 16 and 24 bits pack channel data with little-endian order (true, default) or big-endian (false)</li>
  <li><code>bits</code> - pack channel data in 8 (default), 16 or 24 bits.</li>
  <li><code>channels</code> - list of channels to convert to signal, default <code>[0 1 2]</code> (for all you can use <code>:all</code> keyword).</li>
  <li><code>coding</code> - encode signal with one of the encoders: <code>:alaw</code>, <code>:alaw-rev</code>, <code>:ulaw</code>, <code>:ulaw-rev</code> or <code>:none</code> (default).</li>
</ul>
<p>Pixels can be restored from Signal with <a href="clojure2d.extra.signal.html#var-signal-.3Epixels">signal-&gt;pixels</a> function.</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Basic usage</p></blockquote><pre><code class="hljs clojure">(pixels-&gt;signal (p/load-pixels "docs/cockatoo.jpg"))
;;=&gt; size=67500</code></pre></div><div><blockquote><p>Custom configuration</p></blockquote><pre><code class="hljs clojure">(pixels-&gt;signal (p/load-pixels "docs/cockatoo.jpg")
                {:planar? false,
                 :signed? true,
                 :bits 24,
                 :coding :ulaw,
                 :channels [2 1]})
;;=&gt; size=15000</code></pre></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/extra/signal.clj#L76">view source</a></div></div><div class="public anchor" id="var-save-signal"><h3>save-signal</h3><div class="usage"><code>(save-signal s filename)</code></div><div class="doc"><div class="markdown"><p>Save signal to file</p></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/extra/signal.clj#L913">view source</a></div></div><div class="public anchor" id="var-signal-.3Epixels"><h3>signal-&gt;pixels</h3><div class="usage"><code>(signal-&gt;pixels target sig {:keys [planar? signed? little-endian? bits channels coding], :or {planar? true, little-endian? true, bits 8, signed? false, channels [0 1 2], coding :none}})</code><code>(signal-&gt;pixels target sig)</code></div><div class="doc"><div class="markdown"><p>Convert <code>Signal</code> to <code>Pixels</code> storing result into <code>target</code> (mutating it!).</p>
<p>Specification is the same as in <a href="null">pixels-signal</a> functions.</p></div></div><div class="markdown"><h4>Examples</h4><div><blockquote><p>Basic usage</p></blockquote><pre><code class="hljs clojure">(let [p (p/load-pixels "docs/cockatoo.jpg")
      target (p/clone-pixels p)]
  (signal-&gt;pixels target (pixels-&gt;signal p)))
;;=&gt; pixels (150, 150)</code></pre></div><div><blockquote><p>Custom configuration</p></blockquote><pre><code class="hljs clojure">(let [p (p/load-pixels "docs/cockatoo.jpg")
      target (p/clone-pixels p)
      conf-in {:planar? false,
               :signed? true,
               :bits 24,
               :coding :alaw,
               :channels [2 1]}
      conf-out (merge conf-in {:coding :alaw-rev})]
  (signal-&gt;pixels target (pixels-&gt;signal p conf-in) conf-out))
;;=&gt; pixels (150, 150)</code></pre></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/extra/signal.clj#L96">view source</a></div></div><div class="public anchor" id="var-signal-from-wave"><h3>signal-from-wave</h3><div class="usage"><code>(signal-from-wave f samplerate seconds)</code></div><div class="doc"><div class="markdown"><p>Create Signal from oscillator. Parameters are: f - oscillator, samplerate and number of seconds.</p></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/extra/signal.clj#L999">view source</a></div></div><div class="public anchor" id="var-snoise"><h3>snoise</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/Clojure2D/clojure2d/blob/master/src/clojure2d/extra/signal.clj#L958">view source</a></div></div></div></body></html>